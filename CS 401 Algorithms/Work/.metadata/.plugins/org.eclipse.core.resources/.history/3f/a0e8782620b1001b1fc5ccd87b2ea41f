import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Iterator;
import edu.princeton.cs.algs4.Point2D;
import edu.princeton.cs.algs4.StdDraw;

public class ConvexHullBuilder {
	
	Iterable<Point2D> finalHull;
	ArrayList<Point2D> tempArray;
	
	public ConvexHullBuilder(ArrayList<Point2D> arraylist) {
		finalHull = arraylist;
		tempArray = new ArrayList<Point2D>(arraylist);
	}
	
	public Iterable<Point2D> sortY(Iterable<Point2D> list) {
		
		Collections.sort(tempArray);
		//System.out.println(tempArray.toString());
		
		list = tempArray;
		
		return list;
	}
	
	public Iterable<Point2D> polar(Iterable<Point2D> hull) { //done
		ArrayList<Point2D> list = new ArrayList<Point2D>();
		Point2D startPoint;
		Iterator<Point2D> iter = hull.iterator();
		startPoint = iter.next();
		
		while (iter.hasNext()) {
			Point2D temp = iter.next();
			list.add(temp);			
			Collections.sort(list, startPoint.polarOrder());
		}
		
		Collections.reverse(list);
		
		System.out.println(list.toString());
		
		hull = list;
		
		
		
		return hull;
	}
	
	public Iterable<Point2D> leftOrRight(Iterable<Point2D> hull, Point2D start) {
		Iterator<Point2D> iter = finalHull.iterator();
		ArrayList<Point2D> list = new ArrayList<Point2D>();
		ArrayList<Point2D> finalList = new ArrayList<Point2D>();
		
		while (iter.hasNext()) {
			list.add(iter.next());
		}
		
		System.out.println(list.toString());
		
		for (int i = 0; i < list.size() - 1;) {
			Point2D starting = start;
			
			if (list.get(i).ccw(starting, list.get(i), list.get(i + 1)) == -1) {
				list.remove(i + 1);
				continue;
				
			} else if (list.get(i).ccw(starting, list.get(i), list.get(i + 1)) == 1) {
				finalList.add(starting);
				starting = list.get(i);
				i++;
			}
		}
		
		System.out.println(finalList.toString());
		
		hull = finalList;
		
		return hull;
		
	}

	public Iterable<Point2D> hull() {
		Iterator<Point2D> iter = finalHull.iterator();
		Point2D startPoint = iter.next();
		
		sortY(finalHull);
		polar(finalHull);
		leftOrRight(finalHull, startPoint);
		
//		for (Point2D p : finalHull) {
//			System.out.println(p.x());
//			System.out.println(p.y());
//			System.out.println();
//		}
		
		
		//sort ascending based on y coordinate
		
		return finalHull;
	}
	
	
}
